<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SportSpark AI - Democratizing Sports Talent Assessment</title>
    <meta name="google-site-verification" content="O_WwEbIluTrF8WO8eL3Qk_F2AQCVyzX_POHnbx40nQg"/>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f8fafc;
        }
        .hero-gradient {
            background: linear-gradient(135deg, #4f46e5 0%, #06b6d4 100%);
        }
        .text-gradient {
            background: -webkit-linear-gradient(45deg, #4f46e5, #06b6d4);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        .feature-card:hover {
            transform: translateY(-8px);
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
        }
        /* Chatbot Styles */
        #chat-widget-container {
            position: fixed;
            bottom: 2rem;
            right: 2rem;
            z-index: 1000;
        }
        #chat-bubble {
            background-color: #4f46e5;
            color: white;
            width: 60px;
            height: 60px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            box-shadow: 0 4px 12px rgba(0,0,0,0.2);
            transition: transform 0.2s ease-in-out;
        }
        #chat-bubble:hover {
            transform: scale(1.1);
        }
        #chat-window {
            position: fixed;
            bottom: 6rem;
            right: 2rem;
            width: 90%;
            max-width: 400px;
            height: 70vh;
            max-height: 600px;
            background: white;
            border-radius: 1rem;
            box-shadow: 0 10px 25px rgba(0,0,0,0.2);
            display: flex;
            flex-direction: column;
            overflow: hidden;
            transition: opacity 0.3s, transform 0.3s;
            transform-origin: bottom right;
        }
        .chat-header {
            background: #4f46e5;
            color: white;
            padding: 1rem;
            font-weight: bold;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        #close-chat {
            cursor: pointer;
            background: none;
            border: none;
            color: white;
        }
        .chat-messages {
            flex-grow: 1;
            padding: 1rem;
            overflow-y: auto;
            display: flex;
            flex-direction: column;
            gap: 0.75rem;
        }
        .message {
            padding: 0.75rem 1rem;
            border-radius: 1rem;
            max-width: 80%;
            word-wrap: break-word;
            line-height: 1.5;
        }
        .user-message {
            background-color: #eef2ff;
            color: #312e81;
            align-self: flex-end;
            border-bottom-right-radius: 0.25rem;
        }
        .bot-message {
            background-color: #f1f5f9;
            color: #1e293b;
            align-self: flex-start;
            border-bottom-left-radius: 0.25rem;
        }
        .typing-indicator {
            align-self: flex-start;
            display: flex;
            align-items: center;
            gap: 0.25rem;
            padding: 0.75rem 1rem;
        }
        .typing-indicator span {
            width: 8px;
            height: 8px;
            background-color: #94a3b8;
            border-radius: 50%;
            animation: bounce 1.2s infinite ease-in-out;
        }
        .typing-indicator span:nth-child(2) { animation-delay: 0.2s; }
        .typing-indicator span:nth-child(3) { animation-delay: 0.4s; }
        @keyframes bounce {
            0%, 80%, 100% { transform: scale(0); }
            40% { transform: scale(1.0); }
        }
        .chat-input {
            border-top: 1px solid #e5e7eb;
            padding: 1rem;
            background-color: #f8fafc;
        }
        .chat-input form {
            display: flex;
            gap: 0.5rem;
        }
        .chat-input input {
            flex-grow: 1;
            border: 1px solid #d1d5db;
            border-radius: 0.5rem;
            padding: 0.75rem;
            outline: none;
        }
        .chat-input input:focus {
            border-color: #4f46e5;
            box-shadow: 0 0 0 2px rgba(79, 70, 229, 0.2);
        }
        .chat-input button {
            background-color: #4f46e5;
            color: white;
            border: none;
            border-radius: 0.5rem;
            padding: 0 1rem;
            cursor: pointer;
            transition: background-color 0.2s;
        }
        .chat-input button:hover {
            background-color: #4338ca;
        }
        .hidden {
            opacity: 0;
            transform: scale(0.95);
            pointer-events: none;
        }
    </style>
</head>
<body class="text-gray-800">

    <!-- Header & Navigation -->
    <header class="bg-white shadow-md sticky top-0 z-50">
       <!-- ... your existing header code ... -->
       <nav class="container mx-auto px-6 py-4 flex justify-between items-center">
            <a href="#" class="text-2xl font-bold text-gray-800">
                Sport<span class="text-indigo-600">Spark</span> AI
            </a>
            <!-- Mobile Menu Button -->
            <button id="mobile-menu-button" class="md:hidden">
                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16m-7 6h7"></path></svg>
            </button>
            <!-- Desktop Menu -->
            <div id="desktop-menu" class="hidden md:flex items-center space-x-6">
                <a href="#home" class="text-gray-600 hover:text-indigo-600 transition duration-300">Home</a>
                <a href="#about" class="text-gray-600 hover:text-indigo-600 transition duration-300">About Us</a>
                <a href="#how-it-works" class="text-gray-600 hover:text-indigo-600 transition duration-300">How It Works</a>
                <a href="#features" class="text-gray-600 hover:text-indigo-600 transition duration-300">Features</a>
                <a href="#contact" class="bg-indigo-600 text-white py-2 px-4 rounded-lg hover:bg-indigo-700 transition duration-300">Get Started</a>
            </div>
        </nav>
        <!-- Mobile Menu -->
        <div id="mobile-menu" class="hidden md:hidden px-6 pb-4">
            <a href="#home" class="block py-2 text-gray-600 hover:text-indigo-600">Home</a>
            <a href="#about" class="block py-2 text-gray-600 hover:text-indigo-600">About Us</a>
            <a href="#how-it-works" class="block py-2 text-gray-600 hover:text-indigo-600">How It Works</a>
            <a href="#features" class="block py-2 text-gray-600 hover:text-indigo-600">Features</a>
            <a href="#contact" class="block mt-2 bg-indigo-600 text-white py-2 px-4 rounded-lg hover:bg-indigo-700 text-center">Get Started</a>
        </div>
    </header>

    <main>
        <!-- Your existing sections (Home, About, etc.) -->
        <section id="home" class="hero-gradient text-white py-20 md:py-32">
             <div class="container mx-auto px-6 text-center">
                <h1 class="text-4xl md:text-6xl font-extrabold leading-tight mb-4">Unleash Your Potential.</h1>
                <p class="text-lg md:text-xl text-indigo-100 max-w-3xl mx-auto mb-8">The AI-powered mobile platform democratizing sports talent assessment for every aspiring athlete, everywhere.</p>
                <a href="#contact" class="bg-white text-indigo-600 font-bold py-3 px-8 rounded-full hover:bg-gray-100 transition duration-300 text-lg shadow-lg">Start Your Journey Today</a>
            </div>
        </section>
        <section id="about" class="py-20 bg-white">
            <!-- ... your existing about section ... -->
        </section>
        <section id="how-it-works" class="py-20 bg-gray-50">
            <!-- ... your existing how-it-works section ... -->
        </section>
        <section id="features" class="py-20 bg-white">
            <!-- ... your existing features section ... -->
        </section>
        <section id="contact" class="py-20 hero-gradient">
            <!-- ... your existing contact section ... -->
        </section>
    </main>

    <!-- Footer -->
    <footer class="bg-gray-800 text-white py-10">
        <div class="container mx-auto px-6 text-center">
            <p>&copy; 2024 SportSpark AI. All Rights Reserved.</p>
            <p class="mt-2 text-gray-400">Empowering the next generation of athletes.</p>
        </div>
    </footer>

    <!-- Chatbot Widget -->
    <div id="chat-widget-container">
        <!-- Chat Bubble -->
        <div id="chat-bubble">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8" viewBox="0 0 20 20" fill="currentColor">
                <path fill-rule="evenodd" d="M18 10c0 3.866-3.582 7-8 7a8.839 8.839 0 01-4.445-1.252A1 1 0 014.99 14.896a6.953 6.953 0 001.996.604 7 7 0 100-11.004A6.953 6.953 0 004.99 5.104a1 1 0 01-.555-.955A8.839 8.839 0 0110 3c4.418 0 8 3.134 8 7zM4.445 1.252A1 1 0 015.01 2.045a6.953 6.953 0 000 15.91 1 1 0 01-.565.793A8.839 8.839 0 012 10c0-3.866 3.582-7 8-7 1.43 0 2.784.368 3.995 1.005A1 1 0 0115.01 5.104a6.953 6.953 0 00-1.996-.604 7 7 0 100 11.004c.738 0 1.446-.113 2.11-.321a1 1 0 01.928.212 8.839 8.839 0 01-3.995 2.628z" clip-rule="evenodd" />
            </svg>
        </div>
        <!-- Chat Window -->
        <div id="chat-window" class="hidden">
            <div class="chat-header">
                <span>AI Health Coach</span>
                <button id="close-chat">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" /></svg>
                </button>
            </div>
            <div class="chat-messages" id="chat-messages">
                <div class="message bot-message">
                    Hi! I'm your AI Health Coach. Ask me anything about sports nutrition, workout recovery, or fitness!
                </div>
            </div>
            <div class="chat-input">
                <form id="chat-form">
                    <input type="text" id="user-input" placeholder="Ask a question..." autocomplete="off">
                    <button type="submit">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" viewBox="0 0 20 20" fill="currentColor">
                            <path d="M10.894 2.553a1 1 0 00-1.788 0l-7 14a1 1 0 001.169 1.409l5-1.429A1 1 0 009 15.571V11a1 1 0 112 0v4.571a1 1 0 00.725.962l5 1.428a1 1 0 001.17-1.408l-7-14z" />
                        </svg>
                    </button>
                </form>
            </div>
        </div>
    </div>

    <script>
        // Mobile menu toggle script
        const mobileMenuButton = document.getElementById('mobile-menu-button');
        const mobileMenu = document.getElementById('mobile-menu');
        mobileMenuButton.addEventListener('click', () => {
            mobileMenu.classList.toggle('hidden');
        });
        const mobileLinks = mobileMenu.getElementsByTagName('a');
        for (let link of mobileLinks) {
            link.addEventListener('click', () => {
                mobileMenu.classList.add('hidden');
            });
        }

        // --- CHATBOT SCRIPT ---
        const chatBubble = document.getElementById('chat-bubble');
        const chatWindow = document.getElementById('chat-window');
        const closeChat = document.getElementById('close-chat');
        const chatForm = document.getElementById('chat-form');
        const userInput = document.getElementById('user-input');
        const chatMessages = document.getElementById('chat-messages');

        const API_KEY = ""; // The environment provides this key. Do not add a key here.
        const API_URL = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:generateContent?key=${API_KEY}`;
        
        // History of the conversation
        let conversationHistory = [];

        chatBubble.addEventListener('click', () => {
            chatWindow.classList.toggle('hidden');
        });

        closeChat.addEventListener('click', () => {
            chatWindow.classList.add('hidden');
        });

        chatForm.addEventListener('submit', async (e) => {
            e.preventDefault();
            const userMessage = userInput.value.trim();
            if (!userMessage) return;

            addMessage(userMessage, 'user');
            userInput.value = '';
            
            // Add user message to history
            conversationHistory.push({ role: "user", parts: [{ text: userMessage }] });

            showTypingIndicator();
            
            try {
                const aiResponse = await getAIResponse(userMessage);
                removeTypingIndicator();
                addMessage(aiResponse, 'bot');
                // Add bot response to history
                conversationHistory.push({ role: "model", parts: [{ text: aiResponse }] });
            } catch (error) {
                removeTypingIndicator();
                addMessage("Sorry, I'm having trouble connecting right now. Please try again later.", 'bot');
                console.error("Error fetching AI response:", error);
            }
        });

        function addMessage(text, sender) {
            const messageElement = document.createElement('div');
            messageElement.classList.add('message', sender === 'user' ? 'user-message' : 'bot-message');
            messageElement.textContent = text;
            chatMessages.appendChild(messageElement);
            chatMessages.scrollTop = chatMessages.scrollHeight; // Auto-scroll to the bottom
        }

        function showTypingIndicator() {
            const typingIndicator = document.createElement('div');
            typingIndicator.id = 'typing-indicator';
            typingIndicator.classList.add('message', 'typing-indicator');
            typingIndicator.innerHTML = `<span></span><span></span><span></span>`;
            chatMessages.appendChild(typingIndicator);
            chatMessages.scrollTop = chatMessages.scrollHeight;
        }

        function removeTypingIndicator() {
            const typingIndicator = document.getElementById('typing-indicator');
            if (typingIndicator) {
                typingIndicator.remove();
            }
        }

        async function getAIResponse(userMessage) {
            const systemPrompt = "You are a friendly and encouraging AI Health Coach for young, aspiring athletes, especially those from underprivileged backgrounds. Your name is Sparky. Keep your answers concise, practical, and easy to understand. Focus on topics like nutrition, hydration, simple workout routines, injury prevention, and mental motivation. Avoid overly complex medical jargon. Always prioritize safety and recommend consulting a doctor or a professional for serious issues. Start your very first response with a friendly greeting and introduce yourself.";

            const payload = {
                contents: conversationHistory,
                systemInstruction: {
                    parts: [{ text: systemPrompt }]
                },
            };

            const response = await fetch(API_URL, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify(payload)
            });

            if (!response.ok) {
                throw new Error(`API request failed with status ${response.status}`);
            }

            const data = await response.json();
            
            if (data.candidates && data.candidates.length > 0 && data.candidates[0].content.parts[0].text) {
                return data.candidates[0].content.parts[0].text;
            } else {
                // Check for safety ratings or other reasons for no content
                if (data.promptFeedback && data.promptFeedback.blockReason) {
                    return `I can't answer that. Reason: ${data.promptFeedback.blockReason.toLowerCase()}`;
                }
                return "I'm not sure how to respond to that. Could you ask in a different way?";
            }
        }
    </script>
</body>
</html>

